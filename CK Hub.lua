local lib = loadstring(game:HttpGet("https://raw.githubusercontent.com/bitxchas/eXPLOIT/main/YES.txt"))()

local win = lib:Window("C-K Hub", Color3.fromRGB(0, 0, 45), Enum.KeyCode.RightControl)


local plrs = game.Players.LocalPlayer
if game.Players.LocalPlayer.UserId == 684274355 or game.Players.LocalPlayer.UserId == 37981622 then
    local tab = win:Tab("Combat")

    local ESPEnabled = false
    local AimLockEnabled = false
    local targetPlayer = nil
    local HighlightColor = Color3.fromRGB(255, 255, 255) 
    local AimPart = "Head" 
    local Keybind = Enum.KeyCode.Q 

    local Players = game:GetService("Players")
    local UserInputService = game:GetService("UserInputService")
    local LocalPlayer = Players.LocalPlayer

    local highlights = {} 

    local function createHighlight(player)
        local character = player.Character
        if character and player ~= LocalPlayer then
            local highlight = highlights[player]
            
            if not highlight or not highlight.Parent then
                highlight = Instance.new("Highlight")
                highlight.Name = "PlayerHighlight"
                highlight.Adornee = character
                highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                highlight.OutlineColor = HighlightColor
                highlight.OutlineTransparency = 0.5
                highlight.FillTransparency = 1
                highlight.Parent = character

                highlights[player] = highlight
            else
                highlight.Adornee = character
            end
        end
    end

    local function highlightPlayer(player)
        if player.Character then
            createHighlight(player)
        end
        player.CharacterAdded:Connect(function()
            if ESPEnabled then
                wait(1)
                createHighlight(player)
            end
        end)
    end

    local function highlightAllPlayers()
        for _, player in ipairs(Players:GetPlayers()) do
            highlightPlayer(player)
        end
    end

    Players.PlayerAdded:Connect(function(player)
        highlightPlayer(player)
    end)

    highlightAllPlayers()

    local function lockMouseToPlayerPart(player)
        targetPlayer = player
        UserInputService.MouseBehavior = Enum.MouseBehavior.LockCenter
    end

    local function unlockMouse()
        targetPlayer = nil
        UserInputService.MouseBehavior = Enum.MouseBehavior.Default
    end

    local function findNearestPlayerPart(mousePosition)
        local nearestPlayer = nil
        local minDistance = math.huge
        local camera = workspace.CurrentCamera

        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character then
                local character = player.Character
                local part = character:FindFirstChild(AimPart)

                if AimPart == "Torso" and not part then
                    part = character:FindFirstChild("UpperTorso")
                end

                if part then
                    local partPosition = part.Position
                    local partScreenPosition = camera:WorldToViewportPoint(partPosition)

                    if partScreenPosition.Z > 0 then
                        local distance = (Vector2.new(partScreenPosition.X, partScreenPosition.Y) - mousePosition).magnitude

                        if distance < minDistance then
                            minDistance = distance
                            nearestPlayer = player
                        end
                    end
                end
            end
        end

        return nearestPlayer
    end

    local function updateCamera()
        if AimLockEnabled and targetPlayer then
            local character = targetPlayer.Character
            local part = character:FindFirstChild(AimPart)

            if AimPart == "Torso" and not part then
                part = character:FindFirstChild("UpperTorso")
            end

            if part then
                local camera = workspace.CurrentCamera
                local currentCameraCFrame = camera.CFrame
                local newCameraCFrame = CFrame.new(currentCameraCFrame.Position, part.Position)
                camera.CFrame = newCameraCFrame
            else
                unlockMouse()
            end
        end
    end

    local function updateESP()
        if ESPEnabled then
            for _, player in ipairs(Players:GetPlayers()) do
                if player.Character then
                    createHighlight(player)
                end
            end
        end
    end

    UserInputService.InputBegan:Connect(function(input)
        if input.KeyCode == Keybind then
            if AimLockEnabled then
                if not targetPlayer then
                    local mouse = LocalPlayer:GetMouse()
                    local mousePosition = Vector2.new(mouse.X, mouse.Y)
                    local nearestPlayer = findNearestPlayerPart(mousePosition)
                    if nearestPlayer then
                        lockMouseToPlayerPart(nearestPlayer)
                    end
                else
                    unlockMouse()
                end
            end
        end
    end)

    game:GetService("RunService").RenderStepped:Connect(updateCamera)
    game:GetService("RunService").Stepped:Connect(updateESP)

    -- GUI
    local colorPicker = tab:Colorpicker("Highlight Color", HighlightColor, function(color)
        HighlightColor = color
        for player, highlight in pairs(highlights) do
            if highlight then
                highlight:Destroy()
            end
        end
        highlights = {}
        if ESPEnabled then
            highlightAllPlayers()
        end
    end)

    tab:Toggle("ESP", false, function(t)
        ESPEnabled = t
        if not t then
            for player, highlight in pairs(highlights) do
                if highlight then
                    highlight:Destroy()
                end
            end
            highlights = {}
        else
            highlightAllPlayers()
        end
    end)

    tab:Toggle("Aim Lock", false, function(t)
        lib:Notification("Notification", "Press " .. Keybind.Name .. " to lock", "Yes")
        AimLockEnabled = t
        if not t then
            unlockMouse()
        end
    end)

    local aimParts = {"Head", "Torso"}
    tab:Dropdown("Aim Part", aimParts, function(selectedPart)
        AimPart = selectedPart
        lib:Notification("Notification", "Aim Lock part set to " .. selectedPart, "Confirm")
    end)

    local alphabetKeys = {"A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"}
    tab:Dropdown("Keybind", alphabetKeys, function(selectedKey)
        Keybind = Enum.KeyCode[selectedKey]
        lib:Notification("Notification", "Keybind set to " .. selectedKey, "Confirm")
    end)

    tab:Label("made by - Keanu, and Compa")
else
    game.Players.LocalPlayer:Kick("You're not whitelisted.")
end

